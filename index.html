<!DOCTYPE html>

<!--
  Dmytro Tarasiuk
  taskcalc@membrama.com
*/

-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="uk">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="styles.css">
  <!--Roboto Font-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <!--/-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>  
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js "></script>
  <script src="my.js"></script>
</head>
<!----------------------------------------------------------------------------------------------->
<body bgcolor="lightgray">
  <center>
    <h1 class="h1-main">Калькулятор індивідуального завдання</h1>
    <fieldset class="fset-main">
      <legend class="fset-legend">
        <table>
          <tr>
            <td>Студент(-ка):</td>
            <td>Лаб.№</td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><input id="inp-fullname" class="inp-fullname" type="text" placeholder="Ім'я Призвіще" size="20"/></td>
            <td>
              <select id="sel-widn" class="sel-widn">
                <option selected>01</option>
                <option>02</option>
                <option>03</option>
                <option>04</option>
                <option>05</option>
                <option>06</option>
                <option>07</option>
                <option>08</option>
                <option>09</option>
                <option>10</option>
                <!--option>КР</option-->
                <option>ЕКЗ</option>
              </select>    
            </td>
            <td><button id="button-gen" class="button-gen">OK</button></td>
          </tr>
          </tbody>
        </table>
      </legend>
      <div id="content" class="content">
        <h2>Як отримати свій варіант завдання?</h2>
        1. Введіть спочатку ім'я, а потім призвіще українською мовою.<br>
        2. Виберіть номер лабораторно-практичної роботи.<br>
        3. Натисніть [OK] щоб отримати індивідуальні параметри завдання.
      </div>
    </fieldset>
   </center>
</body>
<!----------------------------------------------------------------------------------------------->
<script>
  function rand_range(rand, from, to) {
    return rand() * (to - from) + from; // [from,to)
  }
</script>

<script>
  function copy_to_clipboard(text) {
    navigator.clipboard.writeText(text).then(function () {
      alert('Скопійовано! Використайте CTRL-V щоб вставити в Google Colab або деінде!')
    }, function () {
      alert('Не скопійовано. Перевірте дозволи для clipboard')
    });
  }
</script>

<script>
  /////////////////////////////////////////////////////////////////// ЛР 01 ///
  function lab_pract_01() {
    console.log('Лабораторно-практична робота №1');
    var dfht = '<div class="content01-div">'
      +   '<a href="https://colab.research.google.com/drive/1nnnJQwndw07Tf03J9cstVYlGfPrAoeRI?usp=drive_link">'
      +   'Посилання</a> на завдання';
      + '</div>';
    $('#content').html(dfht)
  }
</script>

<script>
function pad(num, size) {
  var num = num.toString();
  while (num.length < size) num = "0" + num;
  return num;
}
</script>

<script>
  /////////////////////////////////////////////////////////////////// ЛР 02 ///
  function lab_pract_02(rand) {
    console.log('Лабораторно-практична робота №2');
    const randge = function(from, to) { return rand_range(rand, from, to); }
    const functs = ['2.2*x=2**x',
                    'x**2=-4*sin(x)',
                    '5*x=8+8*ln(x)',
                    '3*x=e**x',
                    'x*(x+1)**2=-0.05',
                    'x=(x+1)**3',
                    'x+0.5=(x+0.5)**3',
                    'x**2=sin(7*x)',
                    '2.2+x=sqrt(abs(sin(x+2)))',
                    'tg(0.4*x+0.4)=x**2',
                    'sqrt(x)-cos(2.5*x)=0.7'];
    var n = Math.trunc(randge(0, functs.length));
    var m = Math.trunc(randge(1, 100));
    var e = Math.trunc(randge(3, 5+1));
    var me = '1.'+pad(m,2)+'e-'+e;
    var dfht = '<div class="content01-div">'
      +   '<a href="https://colab.research.google.com/drive/1Vqk7vj3JNZqxxo78lyflwQEAEsBdhjzo?usp=sharing">'
      +   'Посилання</a> на завдання'
      +   '<hr/><b>Ваше рівняння:</b> <i>'+functs[n]+'</i>'
      +   '<br/><b>Точність рішення:</b> <i>'+me+'</i>'
      + '</div>';
    $('#content').html(dfht);
    console.log('Equotion='+functs[n]+', Eps='+me);
  }
</script>

<script>
  $(function() {
    console.log("Loaded...");
    $('#inp-fullname').val(Cookies.get('fullname'));
    const lab = findGetParameter('lab');
    $('#sel-widn').val(lab || Cookies.get('widn') || '01');

    $('#button-gen').on('click', function () {
      const fn = $('#inp-fullname').val().trim().replace(/\s+/g,' ').toUpperCase();
      if (fn.length == 0) {
        alert('Немає імені/прізвища!');
        return;
      };
      seedlist = seedlist_4x32(fn)
      var rand = sfc32(seedlist[0], seedlist[1], seedlist[2], seedlist[3]);

      switch($('#sel-widn').val()) {
        case '01': lab_pract_01(); break;
        case '02': lab_pract_02(rand); break;
        default:
          alert('Вибачте, ще не готово...');
          break;
      }
    });

    $('#inp-fullname').on('change', function () {
      Cookies.set('fullname', $('#inp-fullname').val());
    });

    $('#inp-fullname').keypress(function (e) {
      var key = e.which;
      if(key == 13) { // the enter key code
        $('#button-gen').click();
        return false;
      }
    });

    $('#sel-widn').on('change', function () {
      Cookies.set('widn', $('#sel-widn').val());
    });
  });
</script>
</html>
